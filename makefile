# ============================================================
# Compiler & flags
# ============================================================
CXX      := g++
CXXFLAGS := -std=c++11 -O2 -Wall -Wextra -Isrc
LDFLAGS  :=

# ============================================================
# Target
# ============================================================
TARGET := bmatch

# ============================================================
# Source files
# ============================================================
SRCDIR := src
SRCS := \
    $(SRCDIR)/parser.cpp \
    $(SRCDIR)/simulator.cpp \
    $(SRCDIR)/match.cpp \
    $(SRCDIR)/match_writer.cpp \
    $(SRCDIR)/main.cpp

# Object files
OBJS := $(SRCS:.cpp=.o)

# ============================================================
# Build rules
# ============================================================
all: $(TARGET)

$(TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) $^ -o $@ $(LDFLAGS)

$(SRCDIR)/%.o: $(SRCDIR)/%.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

# ============================================================
# Utility
# ============================================================
.PHONY: clean
clean:
	rm -f $(OBJS) $(TARGET)
